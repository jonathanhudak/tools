{"version":3,"file":"chord-scale-matrix-BuecDjWQ.js","sources":["../../../apps/music-practice/src/data/chord-scale-matrix.ts"],"sourcesContent":["/**\n * Chord-Scale Matrix Data Model\n * Based on Jeff Schneider's \"Last Chord Scale Charts\" system\n *\n * This module contains the complete 28-entry chord-scale matrix\n * (7 degrees Ã— 4 scale types) that maps chord qualities to their\n * parent scales and modes.\n */\n\nexport type ScaleType = \"major\" | \"naturalMinor\" | \"melodicMinor\" | \"harmonicMinor\";\nexport type Degree = 1 | 2 | 3 | 4 | 5 | 6 | 7;\n\n/**\n * Represents a single entry in the chord-scale matrix\n */\nexport interface ChordScaleEntry {\n  scaleType: ScaleType;\n  degree: Degree;\n  chordQuality: string;\n  modeName: string;\n  romanNumeral: string;\n  \n  // Reference chord from library for voicing display\n  // Format: \"chord-id\" (e.g., \"c-major\", \"d-minor-7\")\n  chordId?: string;\n  // If chord has multiple voicings, which one to use (0-indexed)\n  voicingIndex?: number;\n}\n\n/**\n * The complete chord-scale matrix (28 entries total)\n *\n * This is the foundation of the Jeff Schneider system:\n * - 4 scale families (Major, Natural Minor, Melodic Minor, Harmonic Minor)\n * - 7 degrees per scale\n * - Each degree has a specific chord quality and mode\n */\nexport const CHORD_SCALE_MATRIX: ChordScaleEntry[] = [\n  // ============ MAJOR SCALE ============\n  {\n    scaleType: \"major\",\n    degree: 1,\n    chordQuality: \"Maj7\",\n    modeName: \"Ionian\",\n    romanNumeral: \"IMaj7\",\n    chordId: \"c-major-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"major\",\n    degree: 2,\n    chordQuality: \"m7\",\n    modeName: \"Dorian\",\n    romanNumeral: \"iim7\",\n    chordId: \"d-minor-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"major\",\n    degree: 3,\n    chordQuality: \"m7\",\n    modeName: \"Phrygian\",\n    romanNumeral: \"iiim7\",\n    chordId: \"e-minor-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"major\",\n    degree: 4,\n    chordQuality: \"Maj7\",\n    modeName: \"Lydian\",\n    romanNumeral: \"IVMaj7\",\n    chordId: \"f-major-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"major\",\n    degree: 5,\n    chordQuality: \"7\",\n    modeName: \"Mixolydian\",\n    romanNumeral: \"V7\",\n    chordId: \"g-dominant-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"major\",\n    degree: 6,\n    chordQuality: \"m7\",\n    modeName: \"Aeolian\",\n    romanNumeral: \"vim7\",\n    chordId: \"a-minor-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"major\",\n    degree: 7,\n    chordQuality: \"m7b5\",\n    modeName: \"Locrian\",\n    romanNumeral: \"viim7b5\",\n    chordId: \"b-minor-7b5\",\n    voicingIndex: 0\n  },\n\n  // ============ NATURAL MINOR SCALE ============\n  {\n    scaleType: \"naturalMinor\",\n    degree: 1,\n    chordQuality: \"m7\",\n    modeName: \"Aeolian\",\n    romanNumeral: \"im7\",\n    chordId: \"a-minor-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"naturalMinor\",\n    degree: 2,\n    chordQuality: \"m7b5\",\n    modeName: \"Locrian\",\n    romanNumeral: \"iim7b5\",\n    chordId: \"b-minor-7b5\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"naturalMinor\",\n    degree: 3,\n    chordQuality: \"Maj7\",\n    modeName: \"Ionian\",\n    romanNumeral: \"bIIIMaj7\",\n    chordId: \"c-major-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"naturalMinor\",\n    degree: 4,\n    chordQuality: \"m7\",\n    modeName: \"Dorian\",\n    romanNumeral: \"ivm7\",\n    chordId: \"d-minor-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"naturalMinor\",\n    degree: 5,\n    chordQuality: \"m7\",\n    modeName: \"Phrygian\",\n    romanNumeral: \"vm7\",\n    chordId: \"e-minor-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"naturalMinor\",\n    degree: 6,\n    chordQuality: \"Maj7\",\n    modeName: \"Lydian\",\n    romanNumeral: \"bVIMaj7\",\n    chordId: \"f-major-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"naturalMinor\",\n    degree: 7,\n    chordQuality: \"7\",\n    modeName: \"Mixolydian\",\n    romanNumeral: \"bVII7\",\n    chordId: \"g-dominant-7\",\n    voicingIndex: 0\n  },\n\n  // ============ MELODIC MINOR SCALE ============\n  {\n    scaleType: \"melodicMinor\",\n    degree: 1,\n    chordQuality: \"mMaj7\",\n    modeName: \"Melodic Minor\",\n    romanNumeral: \"imMaj7\",\n    chordId: \"a-minor-major-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"melodicMinor\",\n    degree: 2,\n    chordQuality: \"m7\",\n    modeName: \"Dorian b2\",\n    romanNumeral: \"iim7\",\n    chordId: \"b-minor-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"melodicMinor\",\n    degree: 3,\n    chordQuality: \"Maj7#5\",\n    modeName: \"Lydian Augmented\",\n    romanNumeral: \"bIIIMaj7#5\",\n    chordId: \"c-augmented-major-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"melodicMinor\",\n    degree: 4,\n    chordQuality: \"7\",\n    modeName: \"Lydian Dominant\",\n    romanNumeral: \"IV7\",\n    chordId: \"d-dominant-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"melodicMinor\",\n    degree: 5,\n    chordQuality: \"7\",\n    modeName: \"Mixolydian b6\",\n    romanNumeral: \"V7\",\n    chordId: \"e-dominant-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"melodicMinor\",\n    degree: 6,\n    chordQuality: \"m7b5\",\n    modeName: \"Locrian #2\",\n    romanNumeral: \"vim7b5\",\n    chordId: \"f-sharp-minor-7b5\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"melodicMinor\",\n    degree: 7,\n    chordQuality: \"m7b5\",\n    modeName: \"Super Locrian (Altered)\",\n    romanNumeral: \"viim7b5\",\n    chordId: \"g-sharp-minor-7b5\",\n    voicingIndex: 0\n  },\n\n  // ============ HARMONIC MINOR SCALE ============\n  {\n    scaleType: \"harmonicMinor\",\n    degree: 1,\n    chordQuality: \"mMaj7\",\n    modeName: \"Harmonic Minor\",\n    romanNumeral: \"imMaj7\",\n    chordId: \"a-minor-major-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"harmonicMinor\",\n    degree: 2,\n    chordQuality: \"m7b5\",\n    modeName: \"Locrian #6\",\n    romanNumeral: \"iim7b5\",\n    chordId: \"b-minor-7b5\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"harmonicMinor\",\n    degree: 3,\n    chordQuality: \"Maj7#5\",\n    modeName: \"Ionian #5\",\n    romanNumeral: \"bIIIMaj7#5\",\n    chordId: \"c-augmented-major-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"harmonicMinor\",\n    degree: 4,\n    chordQuality: \"m7\",\n    modeName: \"Dorian #4\",\n    romanNumeral: \"ivm7\",\n    chordId: \"d-minor-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"harmonicMinor\",\n    degree: 5,\n    chordQuality: \"7\",\n    modeName: \"Phrygian Dominant\",\n    romanNumeral: \"V7\",\n    chordId: \"e-dominant-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"harmonicMinor\",\n    degree: 6,\n    chordQuality: \"Maj7\",\n    modeName: \"Lydian #2\",\n    romanNumeral: \"bVIMaj7\",\n    chordId: \"f-major-7\",\n    voicingIndex: 0\n  },\n  {\n    scaleType: \"harmonicMinor\",\n    degree: 7,\n    chordQuality: \"dim7\",\n    modeName: \"Super Locrian bb7\",\n    romanNumeral: \"viidim7\",\n    chordId: \"g-sharp-diminished-7\",\n    voicingIndex: 0\n  },\n];\n\n/**\n * Get all sources (parent scales) for a given chord quality\n *\n * @param chordQuality - The chord quality to search for (e.g., \"m7\", \"Maj7\", \"7\")\n * @returns Array of ChordScaleEntry objects where this chord quality appears\n *\n * @example\n * // Find all sources for Dm7\n * const sources = getChordSources(\"m7\");\n * // Returns entries for:\n * // - Major scale degrees 2, 3, 6 (Dorian, Phrygian, Aeolian)\n * // - Natural Minor degrees 1, 4, 5\n * // - Melodic Minor degree 2\n * // - Harmonic Minor degree 4\n */\nexport function getChordSources(chordQuality: string): ChordScaleEntry[] {\n  return CHORD_SCALE_MATRIX.filter(entry => entry.chordQuality === chordQuality);\n}\n\n/**\n * Build all 7 chords for a specific scale type\n *\n * @param scaleType - The scale family\n * @returns Array of all 7 chord entries in order (degree 1-7)\n *\n * @example\n * const chords = buildScaleChords(\"major\");\n * // Returns: [IMaj7, iim7, iiim7, IVMaj7, V7, vim7, viim7b5]\n */\nexport function buildScaleChords(scaleType: ScaleType): ChordScaleEntry[] {\n  return CHORD_SCALE_MATRIX\n    .filter(entry => entry.scaleType === scaleType)\n    .sort((a, b) => a.degree - b.degree);\n}\n\n/**\n * Get chord information for a specific scale type and degree\n *\n * @param scaleType - The scale family\n * @param degree - The scale degree (1-7)\n * @returns The ChordScaleEntry for that degree, or null if not found\n *\n * @example\n * const info = getDegreeInfo(\"melodicMinor\", 4);\n * // Returns: { chordQuality: \"7\", modeName: \"Lydian Dominant\", ... }\n */\nexport function getDegreeInfo(scaleType: ScaleType, degree: Degree): ChordScaleEntry | null {\n  return CHORD_SCALE_MATRIX.find(\n    entry => entry.scaleType === scaleType && entry.degree === degree\n  ) || null;\n}\n\n/**\n * Get all unique chord qualities in the matrix\n *\n * @returns Array of unique chord quality strings\n *\n * @example\n * const qualities = getAllChordQualities();\n * // Returns: [\"Maj7\", \"m7\", \"7\", \"m7b5\", \"mMaj7\", \"Maj7#5\", \"dim7\"]\n */\nexport function getAllChordQualities(): string[] {\n  const qualities = new Set(CHORD_SCALE_MATRIX.map(entry => entry.chordQuality));\n  return Array.from(qualities);\n}\n\n/**\n * Get all scale type display names\n */\nexport const SCALE_TYPE_NAMES: Record<ScaleType, string> = {\n  major: \"Major\",\n  naturalMinor: \"Natural Minor\",\n  melodicMinor: \"Melodic Minor\",\n  harmonicMinor: \"Harmonic Minor\",\n};\n\n/**\n * Helper to get a chord from the library by ID\n * Used for displaying voicings in the matrix trainer\n *\n * @param chordId - The chord ID (e.g., \"c-major-7\")\n * @returns The Chord object or null if not found\n *\n * @example\n * const chord = getChordFromLibrary(\"c-major-7\");\n * // Can then display chord.voicings[0] in ChordVoicingDisplay\n */\nexport async function getChordFromLibrary(chordId: string) {\n  // Lazy import to avoid circular dependency\n  const { CHORD_LIBRARY } = await import('@/lib/chord-library');\n  return CHORD_LIBRARY.find(c => c.id === chordId);\n}\n"],"names":["CHORD_SCALE_MATRIX","getDegreeInfo","scaleType","degree","entry","getAllChordQualities","qualities","SCALE_TYPE_NAMES"],"mappings":"AAqCO,MAAMA,EAAwC,CAEnD,CACE,UAAW,QACX,OAAQ,EACR,aAAc,OACd,SAAU,SACV,aAAc,QACd,QAAS,YACT,aAAc,CAAA,EAEhB,CACE,UAAW,QACX,OAAQ,EACR,aAAc,KACd,SAAU,SACV,aAAc,OACd,QAAS,YACT,aAAc,CAAA,EAEhB,CACE,UAAW,QACX,OAAQ,EACR,aAAc,KACd,SAAU,WACV,aAAc,QACd,QAAS,YACT,aAAc,CAAA,EAEhB,CACE,UAAW,QACX,OAAQ,EACR,aAAc,OACd,SAAU,SACV,aAAc,SACd,QAAS,YACT,aAAc,CAAA,EAEhB,CACE,UAAW,QACX,OAAQ,EACR,aAAc,IACd,SAAU,aACV,aAAc,KACd,QAAS,eACT,aAAc,CAAA,EAEhB,CACE,UAAW,QACX,OAAQ,EACR,aAAc,KACd,SAAU,UACV,aAAc,OACd,QAAS,YACT,aAAc,CAAA,EAEhB,CACE,UAAW,QACX,OAAQ,EACR,aAAc,OACd,SAAU,UACV,aAAc,UACd,QAAS,cACT,aAAc,CAAA,EAIhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,KACd,SAAU,UACV,aAAc,MACd,QAAS,YACT,aAAc,CAAA,EAEhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,OACd,SAAU,UACV,aAAc,SACd,QAAS,cACT,aAAc,CAAA,EAEhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,OACd,SAAU,SACV,aAAc,WACd,QAAS,YACT,aAAc,CAAA,EAEhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,KACd,SAAU,SACV,aAAc,OACd,QAAS,YACT,aAAc,CAAA,EAEhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,KACd,SAAU,WACV,aAAc,MACd,QAAS,YACT,aAAc,CAAA,EAEhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,OACd,SAAU,SACV,aAAc,UACd,QAAS,YACT,aAAc,CAAA,EAEhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,IACd,SAAU,aACV,aAAc,QACd,QAAS,eACT,aAAc,CAAA,EAIhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,QACd,SAAU,gBACV,aAAc,SACd,QAAS,kBACT,aAAc,CAAA,EAEhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,KACd,SAAU,YACV,aAAc,OACd,QAAS,YACT,aAAc,CAAA,EAEhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,SACd,SAAU,mBACV,aAAc,aACd,QAAS,sBACT,aAAc,CAAA,EAEhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,IACd,SAAU,kBACV,aAAc,MACd,QAAS,eACT,aAAc,CAAA,EAEhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,IACd,SAAU,gBACV,aAAc,KACd,QAAS,eACT,aAAc,CAAA,EAEhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,OACd,SAAU,aACV,aAAc,SACd,QAAS,oBACT,aAAc,CAAA,EAEhB,CACE,UAAW,eACX,OAAQ,EACR,aAAc,OACd,SAAU,0BACV,aAAc,UACd,QAAS,oBACT,aAAc,CAAA,EAIhB,CACE,UAAW,gBACX,OAAQ,EACR,aAAc,QACd,SAAU,iBACV,aAAc,SACd,QAAS,kBACT,aAAc,CAAA,EAEhB,CACE,UAAW,gBACX,OAAQ,EACR,aAAc,OACd,SAAU,aACV,aAAc,SACd,QAAS,cACT,aAAc,CAAA,EAEhB,CACE,UAAW,gBACX,OAAQ,EACR,aAAc,SACd,SAAU,YACV,aAAc,aACd,QAAS,sBACT,aAAc,CAAA,EAEhB,CACE,UAAW,gBACX,OAAQ,EACR,aAAc,KACd,SAAU,YACV,aAAc,OACd,QAAS,YACT,aAAc,CAAA,EAEhB,CACE,UAAW,gBACX,OAAQ,EACR,aAAc,IACd,SAAU,oBACV,aAAc,KACd,QAAS,eACT,aAAc,CAAA,EAEhB,CACE,UAAW,gBACX,OAAQ,EACR,aAAc,OACd,SAAU,YACV,aAAc,UACd,QAAS,YACT,aAAc,CAAA,EAEhB,CACE,UAAW,gBACX,OAAQ,EACR,aAAc,OACd,SAAU,oBACV,aAAc,UACd,QAAS,uBACT,aAAc,CAAA,CAElB,EAgDO,SAASC,EAAcC,EAAsBC,EAAwC,CAC1F,OAAOH,EAAmB,KACxBI,GAASA,EAAM,YAAcF,GAAaE,EAAM,SAAWD,CAAA,GACxD,IACP,CAWO,SAASE,GAAiC,CAC/C,MAAMC,EAAY,IAAI,IAAIN,EAAmB,IAAII,GAASA,EAAM,YAAY,CAAC,EAC7E,OAAO,MAAM,KAAKE,CAAS,CAC7B,CAKO,MAAMC,EAA8C,CACzD,MAAO,QACP,aAAc,gBACd,aAAc,gBACd,cAAe,gBACjB"}