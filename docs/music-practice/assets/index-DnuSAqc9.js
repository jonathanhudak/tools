import{j as v,S as B,e as V,O as W,r as s}from"./index-DTUOieYJ.js";import{M as A,i as D,u as L,P as H,e as K,f as U,L as F}from"./proxy-BizNDdiC.js";const G=W("inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Y({className:e,variant:r,asChild:t=!1,...i}){const o=t?B:"span";return v.jsx(o,{"data-slot":"badge",className:V(G({variant:r}),e),...i})}function $(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function N(...e){return r=>{let t=!1;const i=e.map(o=>{const n=$(o,r);return!t&&typeof n=="function"&&(t=!0),n});if(t)return()=>{for(let o=0;o<i.length;o++){const n=i[o];typeof n=="function"?n():$(e[o],null)}}}}function O(...e){return s.useCallback(N(...e),e)}class T extends s.Component{getSnapshotBeforeUpdate(r){const t=this.props.childRef.current;if(t&&r.isPresent&&!this.props.isPresent){const i=t.offsetParent,o=D(i)&&i.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=o-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function X({children:e,isPresent:r,anchorX:t,root:i}){const o=s.useId(),n=s.useRef(null),h=s.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:C}=s.useContext(A),b=O(n,e==null?void 0:e.ref);return s.useInsertionEffect(()=>{const{width:a,height:g,top:u,left:l,right:d}=h.current;if(r||!n.current||!a||!g)return;const m=t==="left"?`left: ${l}`:`right: ${d}`;n.current.dataset.motionPopId=o;const f=document.createElement("style");C&&(f.nonce=C);const w=i??document.head;return w.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${g}px !important;
            ${m}px !important;
            top: ${u}px !important;
          }
        `),()=>{w.contains(f)&&w.removeChild(f)}},[r]),v.jsx(T,{isPresent:r,childRef:n,sizeRef:h,children:s.cloneElement(e,{ref:b})})}const _=({children:e,initial:r,isPresent:t,onExitComplete:i,custom:o,presenceAffectsLayout:n,mode:h,anchorX:C,root:b})=>{const a=L(q),g=s.useId();let u=!0,l=s.useMemo(()=>(u=!1,{id:g,initial:r,isPresent:t,custom:o,onExitComplete:d=>{a.set(d,!0);for(const m of a.values())if(!m)return;i&&i()},register:d=>(a.set(d,!1),()=>a.delete(d))}),[t,a,i]);return n&&u&&(l={...l}),s.useMemo(()=>{a.forEach((d,m)=>a.set(m,!1))},[t]),s.useEffect(()=>{!t&&!a.size&&i&&i()},[t]),h==="popLayout"&&(e=v.jsx(X,{isPresent:t,anchorX:C,root:b,children:e})),v.jsx(H.Provider,{value:l,children:e})};function q(){return new Map}const R=e=>e.key||"";function z(e){const r=[];return s.Children.forEach(e,t=>{s.isValidElement(t)&&r.push(t)}),r}const Z=({children:e,custom:r,initial:t=!0,onExitComplete:i,presenceAffectsLayout:o=!0,mode:n="sync",propagate:h=!1,anchorX:C="left",root:b})=>{const[a,g]=K(h),u=s.useMemo(()=>z(e),[e]),l=h&&!a?[]:u.map(R),d=s.useRef(!0),m=s.useRef(u),f=L(()=>new Map),[w,I]=s.useState(u),[x,M]=s.useState(u);U(()=>{d.current=!1,m.current=u;for(let p=0;p<x.length;p++){const c=R(x[p]);l.includes(c)?f.delete(c):f.get(c)!==!0&&f.set(c,!1)}},[x,l.length,l.join("-")]);const E=[];if(u!==w){let p=[...u];for(let c=0;c<x.length;c++){const y=x[c],j=R(y);l.includes(j)||(p.splice(c,0,y),E.push(y))}return n==="wait"&&E.length&&(p=E),M(z(p)),I(u),null}const{forceRender:P}=s.useContext(F);return v.jsx(v.Fragment,{children:x.map(p=>{const c=R(p),y=h&&!a?!1:u===x||l.includes(c),j=()=>{if(f.has(c))f.set(c,!0);else return;let k=!0;f.forEach(S=>{S||(k=!1)}),k&&(P==null||P(),M(m.current),h&&(g==null||g()),i&&i())};return v.jsx(_,{isPresent:y,initial:!d.current||t?void 0:!1,custom:r,presenceAffectsLayout:o,mode:n,root:b,onExitComplete:y?void 0:j,anchorX:C,children:p},c)})})};export{Z as A,Y as B};
//# sourceMappingURL=index-DnuSAqc9.js.map
